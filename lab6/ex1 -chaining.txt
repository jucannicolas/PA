#include <stdio.h> ///Mai trebuie luat cazul daca sunt duplicate
#include <stdlib.h>
#define M 7
typedef struct node
{
    int key;
    struct node *next;
} NodeT;
void insertElement(NodeT *hTable[M],int key)
{
    int i=key%M;
    if(hTable[i]==NULL)
    {
        hTable[i]=(NodeT *)calloc(1,sizeof(NodeT));
        hTable[i]->key=key;
        hTable[i]->next=NULL;
    }
    else
    {
        NodeT *p=(NodeT *)calloc(1,sizeof(NodeT));
        p->key=key;
        p->next=hTable[i];
        hTable[i]=p;
    }
}
void afisareLista(NodeT **hashTable)
{
    int i=0;
    for(i=0; i<M; i++)
        if(hashTable[i]!=NULL)
        {
            printf("%d:",i);
            NodeT *p=hashTable[i];
            while(p!=NULL)
            {
                printf("%d ",p->key);
                p=p->next;
            }
            printf("\n");
        }
}
NodeT *findElement(NodeT * hTable[M],int key)
{
    int i=key%M;
    NodeT *p=hTable[i];
    while(p!=NULL)
    {
        if(p->key==key)
        {
            return p;
        }
        p=p->next;
    }
    return p;
}
void deleteElement(NodeT *hTable[M],int key)
{
    int i=key%M;
    NodeT *p=hTable[i],*p_ant=NULL;
    while(p!=NULL)
    {
        if(p->key==key)
            break;
        p_ant=p;
        p=p->next;
    }
    if(p==NULL)
    {
        printf("Nu s-a gasit elementul cautat");
        return ;
    }
    if(p!=hTable[i])
        p_ant->next=p->next;
    else
    {
        hTable[i]=p->next;
    }
    free(p);
}
int main()
{
    NodeT **hTable=(NodeT **)calloc(M,sizeof(NodeT*));
    int i;
    for(i=0; i<M; i++)
        hTable[i]=NULL;
    insertElement(hTable,36);
    insertElement(hTable,14);
    insertElement(hTable,26);
    insertElement(hTable,21);
    insertElement(hTable,5);
    insertElement(hTable,19);
    insertElement(hTable,4);
    afisareLista(hTable);
    deleteElement(hTable,4);
    afisareLista(hTable);
    return 0;
}
