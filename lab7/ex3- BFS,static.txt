#include <stdio.h>
#include <stdlib.h>
#define MAX_NODES 100
#define MAX_EDGES 500
typedef struct node
{
    int key;
    struct node* next;
} NodeT;
typedef struct
{
    NodeT *tail,*head;
} Coada;
typedef struct
{
    int nb;
    int N[MAX_NODES];
    int V[MAX_EDGES];
} Graf;
void enqueue(Coada *q,int key)
{
    NodeT *p=(NodeT *)calloc(1,sizeof(NodeT));
    p->key=key;
    p->next=NULL;
    if(q->head==NULL)
    {
        q->head=q->tail=p;
    }
    else
    {
        q->tail->next=p;
        q->tail=p;
    }
}
NodeT *dequeue(Coada *q)
{
    if(q->head==NULL) return NULL;
    if(q->tail==q->head)
    {
        NodeT *p=q->tail;
        q->tail=q->head=NULL;
        return p;
    }
    NodeT *p=q->head;
    q->head=q->head->next;
    return p;
}
void afisare_vector(int v[],int n)
{
    int i;
    for(i=0; i<n; i++)
        printf("%d ",v[i]);
    printf("\n");
}
void citire_date(Graf *g,FILE *pf)
{
    fscanf(pf,"%d",&(g->nb));
    int i,n=g->nb;
    int u,v;
    int *grade=(int *)calloc(n,sizeof(int));
    while(fscanf(pf," (%d,%d)",&u,&v)==2)
    {
        grade[u]++;
        grade[v]++;
    }
    int c=0;
    g->N[0]=0;
    for(i=0; i<n; i++)
    {
        g->N[i]=c;
        int j;
        for(j=0; j<grade[i]; j++)
        {
            g->V[c++]=0;
        }
        g->V[c++]=-1;

    }
    rewind(pf);
    fscanf(pf,"%d",&n);
    int *poz=(int *)calloc(n,sizeof(int));
    for(i=0;i<n;i++)
        poz[i]=g->N[i];
    while(fscanf(pf," (%d,%d)",&u,&v)==2)
    {
        g->V[poz[u]++]=v;
        g->V[poz[v]++]=u;
    }
    free(grade);
    free(poz);
}
void BFS(Graf g,int start)
{
    int i,n=g.nb;
    Coada q={NULL,NULL};
    int *vizitat=(int *)calloc(n,sizeof(int));
    vizitat[start]=1;
    enqueue(&q,start);
    while(q.head!=NULL)
    {
        NodeT *p=dequeue(&q);
        int cheie=p->key;
        printf("%d ",cheie);
        free(p);
        int j=g.N[cheie];
        while(g.V[j]!=-1)
        {
            if(vizitat[g.V[j]]==0)
            {
                vizitat[g.V[j]]=1;
                enqueue(&q,g.V[j]);
            }
            j++;
        }
    }
    free(vizitat);
}
int main()
{
    FILE *pf=fopen("date.txt","r");
    if(pf==NULL)
    {
        printf("Nu s-a putut deschide fisierul");
        return -1;
    }
    Graf g;
    citire_date(&g,pf);
    ///afisare_vector(g.V,20);
    BFS(g,1);
    return 0;
}
